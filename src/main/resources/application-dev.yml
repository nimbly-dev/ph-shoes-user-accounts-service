# src/main/resources/application-dev.yml

# When the app runs **inside compose**, it must call LocalStack by container name, not localhost
aws:
  endpoint: ${AWS_ENDPOINT:http://localstack:4566}

spring:
  application:
    name: ph-shoes-user-account-service
  mvc:
    problemdetails:
      enabled: false

  mail:
    # App is inside compose â†’ use the service name
    host: mailhog
    port: 1025
    properties:
      mail.smtp.auth: false
      mail.smtp.starttls.enable: false
      mail.smtp.connectiontimeout: 2000
      mail.smtp.timeout: 2000
      mail.smtp.writetimeout: 2000
    # Avoid boot failure if SMTP is momentarily unreachable
    test-connection: false

server:
  error:
    include-stacktrace: never
    include-message: always


jwt:
  issuer: ph-shoes
  secret: change-me-dev-only
  accessTtlSeconds: 3600       # 60 minutes

auth:
  lock:
    maxFailures: 5             # after 5 wrong tries
    durationSeconds: 900       # lock for 15 minutes

logging:
  level:
    root: INFO

notify:
  provider: smtp
  email:
    from: "PH Shoes (DEV) <no-reply@local.test>"
    subjectPrefix: "[PH-Shoes DEV]"

# In dev, link straight to backend verify route
verification:
  ttlSeconds: 900
  linkBaseUrl: http://localhost:8080/api/v1/user-accounts/verify

schema:
  auto-create: true