app:
  cors:
    allowed-origins:
      - "https://phshoesproject.com"
      - "https://www.phshoesproject.com"
      - "https://ph-shoes-frontend.onrender.com"
    allowed-methods: [GET,POST,PUT,PATCH,DELETE,OPTIONS]
    allowed-headers: [Authorization,Content-Type,X-Unsubscribe-Token,List-Unsubscribe-Post]
    exposed-headers: [Authorization,Content-Type,X-Unsubscribe-Token,List-Unsubscribe-Post]
    allow-credentials: true
    max-age: 3600
  frontend:
    base-url: "https://phshoesproject.com/"
    verify-path: "/"
    unsubscribe-path: "/unsubscribe"

spring:
  application:
    name: ph-shoes-user-account-service
  mvc:
    problemdetails:
      enabled: false
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: none
    properties: { }

security:
  email:
    hmac-pepper-b64: ${HMAC_PEPPER_B64}
    aes-key-b64: ${AES_KEY_B64}
  auth:
    dummy-bcrypt-hash: ${DUMMY_BCRYPT_HASH}

management:
  endpoints:
    web:
      exposure:
        include: health,info

server:
  port: ${PORT:8082}
  error:
    include-stacktrace: never
    include-message: never

logging:
  level:
    root: INFO

notification:
  provider: ses
  transport: sesv2
  email:
    from: "PH Shoes <no-reply@phshoesproject.com>"
    subjectPrefix: "[PH-Shoes]"
    listUnsubscribe: "<mailto:unsubscribe@phshoesproject.com>"
    listUnsubscribePost: "List-Unsubscribe=One-Click"
    unsubscribeLink: ${NOTIFICATION_UNSUBSCRIBE_LINK:https://www.phshoesproject.com/api/v1/user-accounts/unsubscribe}

  ses:
    region: ${AWS_REGION:ap-southeast-1}
    endpoint:
    configurationSet: ${SES_CONFIGURATION_SET:}

aws:
  region: ap-southeast-1
  endpoint:

verification:
  ttlSeconds: 900
  linkBaseUrl: ${VERIFICATION_LINK_BASE_URL:https://www.phshoesproject.com/verify/}
  verificationLink: ${VERIFICATION_LINK_BASE_URL:https://www.phshoesproject.com/verify/}
  notMeLink: ${VERIFICATION_NOT_ME_URL:https://www.phshoesproject.com/verify/}
  unsubscribeLink: ${NOTIFICATION_UNSUBSCRIBE_LINK:https://www.phshoesproject.com/api/v1/user-accounts/unsubscribe}

springdoc:
  api-docs.enabled: false
  swagger-ui.enabled: false

schema:
  auto-create: true

phshoes:
  status:
    enabled: true
    path: /system/status
    service-id: user-accounts
    display-name: User Accounts
    environment: ${APP_ENV:prod}
    version: ${APP_VERSION:prod}
    description: Handles registration, verification, and suppression workflows.
    metadata:
      tier: backend
  api:
    rate-limit:
      enabled: true
      default-window: 24h
      global:
        enabled: true
        limit: 2000
      per-ip:
        enabled: true
        limit: 200
      per-user:
        enabled: true
        limit: 60
      routes:
        - name: signup-create
          pattern: /api/v1/user-accounts
          methods: [POST]
          per-user:
            enabled: true
            limit: 3
            window: 1h
        - name: verification-resend
          pattern: /api/v1/verify/email/resend
          methods: [POST]
          per-user:
            enabled: true
            limit: 3
            window: 1h
        - name: status-health
          pattern: /api/v1/system/status
          methods: [GET]
          global:
            enabled: false
          per-ip:
            enabled: false
          per-user:
            enabled: false
